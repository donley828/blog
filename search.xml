<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title></title>
    <url>/blog/2020/03/25/%E5%85%B3%E4%BA%8EJS%E4%BD%9C%E7%94%A8%E5%9F%9F/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>å…³äºJSå¯¹è±¡</title>
    <url>/blog/2020/03/24/%E5%85%B3%E4%BA%8EJS%E5%AF%B9%E8%B1%A1/</url>
    <content><![CDATA[<h1 id="å…³äº-JS-å¯¹è±¡"><a href="#å…³äº-JS-å¯¹è±¡" class="headerlink" title="å…³äº JS å¯¹è±¡"></a>å…³äº JS å¯¹è±¡</h1><p>JS ä¸­çš„å¯¹è±¡æ˜¯ä¸€ç»„æ— åºçš„é”®å€¼å¯¹</p>
<p>å¯¹è±¡å±æ€§ä¸€èˆ¬æœ‰ä¸¤ç±»å±æ€§ï¼Œæ•°æ®å±æ€§å’Œè®¿é—®å™¨å±æ€§</p>
<p>æ•°æ®å±æ€§åŒ…æ‹¬å››ä¸ªç‰¹å¾ï¼š</p>
<ul>
<li>valueï¼šå±æ€§çš„å€¼</li>
<li>writableï¼šå†³å®šå±æ€§èƒ½å¦è¢«ä¿®æ”¹</li>
<li>enumerableï¼šå†³å®š for in èƒ½å¦æšä¸¾è¯¥å±æ€§</li>
<li>configurableï¼šå†³å®šå±æ€§èƒ½å¦è¢«åˆ é™¤æˆ–è€…ä¿®æ”¹å…¶ç‰¹å¾å€¼</li>
</ul>
<p>è®¿é—®å™¨å±æ€§ï¼š</p>
<ul>
<li>getterï¼šundefinedæˆ–è€…å‡½æ•°ï¼Œå–å±æ€§å€¼æ—¶è°ƒç”¨</li>
<li>setterï¼šundefinedæˆ–è€…å‡½æ•°ï¼Œè®¾ç½®å±æ€§å€¼æ—¶è°ƒç”¨</li>
</ul>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>å‰ç«¯ï¼ŒJavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Koa@2 ä¸­é—´ä»¶åŠ è½½æœºåˆ¶è§£æ</title>
    <url>/blog/2018/08/30/Koa-2-%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6%E8%A7%A3%E6%9E%90/</url>
    <content><![CDATA[<p>Koa æ˜¯ tj ä¸»å¯¼çš„ä¸€ä¸ªç›¸æ¯”äº Express å¾ˆå°çš„ Nodejs Web æ¡†æ¶ã€‚å®ƒæ”¯æŒå¤§éƒ¨åˆ† es7 çš„è¯­æ³•æ¯”å¦‚ asyncï¼Œawait å‡½æ•°ã€‚<br>æä¾›äº†ä¸»è¦ä¸º<code>use()</code>çš„å‡½æ•°åº“ï¼Œé€šè¿‡è‡ªå·±ç¼–å†™ä¸­é—´ä»¶å®ç°ä¸€ä¸ªå¥å£®çš„ web åº”ç”¨ã€‚</p>
<a id="more"></a>
<h2 id="ä¸-Exprees-å¯¹æ¯”"><a href="#ä¸-Exprees-å¯¹æ¯”" class="headerlink" title="ä¸ Exprees å¯¹æ¯”"></a>ä¸ Exprees å¯¹æ¯”</h2><p>æœ¬æ–‡ä¸»è¦æ¢ç©¶å®ƒçš„ä¸­é—´ä»¶åŠ è½½æœºåˆ¶ï¼Œæ‰€ä»¥ä¸»è¦è®¨è®ºä¸­é—´ä»¶çš„å†…å®¹ã€‚</p>
<h3 id="Express"><a href="#Express" class="headerlink" title="Express"></a>Express</h3><p>å°±æ‹¿ Express æ¥è¯´ï¼Œå®ƒæ˜¯ç±»ä¼¼è¿™æ ·çš„ï¼š</p>
<blockquote>
<p>Request -&gt; middleware1 -&gt;â€¦-&gt; middleware2 -&gt; Response</p>
</blockquote>
<p>è€Œä¸”åœ¨ä¸­é—´ä»¶æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ²¡æœ‰ç»ˆç»“æˆ–è€…è¯´è¿”å› <code>Response</code>æ—¶ï¼Œå°±å¿…é¡»è°ƒç”¨<code>next()</code>æ–¹æ³•ç›´åˆ°è¯·æ±‚å¤„ç†ç»“æŸï¼Œå¦åˆ™è¿™ä¸ªè¯·æ±‚ä¼šè¢«æŒ‚èµ·ã€‚</p>
<h3 id="Koa"><a href="#Koa" class="headerlink" title="Koa"></a>Koa</h3><p>å…³äº Koa ä¸­é—´ä»¶çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œå°±è­¬å¦‚ä¸‹é¢è¿™ä¸€æ®µä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Â·Â·Â·</span><br><span class="line">app.use(<span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">await</span> next();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">4</span>);</span><br><span class="line">&#125;);</span><br><span class="line">app.use(<span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">await</span> next();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">&#125;);</span><br><span class="line">Â·Â·Â·</span><br></pre></td></tr></table></figure>
<p>å‡å¦‚è¿™æ˜¯åº”ç”¨æ³¨å†Œçš„ä¸¤ä¸ªä¸­é—´ä»¶ï¼Œè¯·æ±‚çš„æ—¶å€™è¿™æ®µä»£ç çš„è¾“å‡ºç»“æœå°†ä¼šæ˜¯<br>1ï¼Œ2ï¼Œ3ï¼Œ4<br>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ<br>å› ä¸ºå½“ Koa çš„ä¸­é—´ä»¶åœ¨é‡åˆ°<code>await next()</code>çš„æ—¶å€™å°±ä¼šè·³è¿‡å…¶åçš„ä»£ç å»æ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶çš„ä»£ç ï¼Œä¾æ¬¡ä¸€ç›´åˆ°æœ‰äº†è¯·æ±‚è¿”å›ä¹Ÿå°±æ˜¯ä¸­é—´ä»¶æ‰§è¡Œåˆ°æœ€åä¸€ä¸ªçš„æ—¶å€™å°±ä¼šæŒ‰ç…§å€’åºè¿”å›æ‰§è¡Œ<code>await next()</code>ä¹‹åçš„ä»£ç ã€‚è¿™æ ·è¯´å¯èƒ½ä¸å¥½ç†è§£ã€‚ç½‘ä¸Šæœ‰ä¸€å¼ æ´‹è‘±åœˆæ¨¡å‹å¯ä»¥å¾ˆå¥½çš„è§£é‡Šè¿™ä¸ªæµç¨‹ã€‚<br><img src="http://ojxko64c5.bkt.clouddn.com/%E6%B4%8B%E8%91%B1%E5%9C%88%E6%A8%A1%E5%9E%8B-koajs.png" alt></p>
<h2 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h2><p>æœ‰äº†è¿™ä¸ªæœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„å°è£…ä¸€äº› cookie å¤„ç†ã€æœåŠ¡å“åº”æ—¶é—´ç­‰æœ‰ç”¨çš„ä¸­é—´ä»¶ã€‚<br>ä½†æ˜¯å¸¦æ¥ä¾¿åˆ©çš„åŒæ—¶ä¸ºä»€ä¹ˆå¯ä»¥å®Œç¾çš„æŒ‰ç…§è¿™ä¸ªé¡ºåºæ‰§è¡Œå‘¢ï¼Ÿå¸¦ç€ç–‘é—®æˆ‘æ‰“å¼€äº† koajs çš„æºç ã€‚<br>ï¼ˆä¸å¾—ä¸è¯´ tj å¤§ç¥å†™çš„ä»£ç çœŸæ˜¯æ—¢ä¼˜é›…åˆå®ç”¨ï¼‰</p>
<h3 id="ä¸­é—´ä»¶æµç¨‹"><a href="#ä¸­é—´ä»¶æµç¨‹" class="headerlink" title="ä¸­é—´ä»¶æµç¨‹"></a>ä¸­é—´ä»¶æµç¨‹</h3><p> å¤§æ¦‚è¯´ä¸€ä¸‹ï¼Œkoa å†…éƒ¨å£°æ˜äº†ä¸€ä¸ªå«<code>middleware</code>çš„ç©ºæ•°ç»„ï¼Œæ¯æ¬¡æ‰§è¡Œ<code>app.use</code>çš„æ—¶å€™ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ª<code>push</code>æ–¹æ³•æŠŠä¸­é—´ä»¶çš„å‡½æ•°å­˜è¿›å»ã€‚<br>æ¥ç€æˆ‘ä»¬å¯ä»¥åœ¨<code>/lib/application.js</code>çš„ 127 è¡Œå·¦å³æ‰¾åˆ°å…³äº<code>middleware</code>çš„å¤„ç†ï¼ŒåŸæ¥æ˜¯ä¼ å…¥äº†ä¸€ä¸ªå«<code>compose</code>çš„æ–¹æ³•å†…ã€‚</p>
<h3 id="koa-compose"><a href="#koa-compose" class="headerlink" title="koa-compose"></a>koa-compose</h3><p>åŸæ¥ä¸­é—´ä»¶çš„å¤„ç†å•ç‹¬æ”¾åœ¨äº†ä¸€ä¸ª repo é‡Œï¼Œæ‰¾åˆ°ä¹‹ååªæœ‰ä¸€ä¸ª<code>index.js</code>æ–‡ä»¶ã€‚<br>æ‰“å¼€å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compose</span>(<span class="params">middleware</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="built_in">Array</span>.isArray(middleware))</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"Middleware stack must be an array!"</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> fn <span class="keyword">of</span> middleware) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> fn !== <span class="string">"function"</span>)</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"Middleware must be composed of functions!"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> <span class="variable">context</span></span></span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return <span class="type">&#123;Promise&#125;</span></span></span></span><br><span class="line"><span class="comment">   * <span class="doctag">@api <span class="variable">public</span></span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿”å›ä¸€ä¸ªdispatchå‡½æ•°,dispatchä¼šè¿”å›å†…éƒ¨ Promosie.resolveï¼Œå¯ä»¥é€šè¿‡.thenæ–¹æ³•æ¥æ”¶</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">context, next</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// last called middleware #</span></span><br><span class="line">    <span class="keyword">let</span> index = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">return</span> dispatch(<span class="number">0</span>); <span class="comment">// 0ä¸ºç¬¬ä¸€ä¸ªä¸­é—´ä»¶</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">dispatch</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (i &lt;= index)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"next() called multiple times"</span>));</span><br><span class="line">      index = i;</span><br><span class="line">      <span class="keyword">let</span> fn = middleware[i];</span><br><span class="line">      <span class="keyword">if</span> (i === middleware.length) fn = next;</span><br><span class="line">      <span class="keyword">if</span> (!fn) <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve();</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// é€’å½’æ‰§è¡Œ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(fn(context, dispatch.bind(<span class="literal">null</span>, i + <span class="number">1</span>)));</span><br><span class="line">      &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(err);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç®€åŒ–"><a href="#ç®€åŒ–" class="headerlink" title="ç®€åŒ–"></a>ç®€åŒ–</h3><p>å¯èƒ½å¤§éƒ¨äººçœ‹åˆ°è¿™é‡Œè¿˜æ˜¯ä¸æ˜ç™½ä¸ºä»€ä¹ˆä¼šæŒ‰ç…§â€œæ´‹è‘±â€çš„é¡ºåºæ‰§è¡Œã€‚<br>æˆ‘ä»¬å¯ä»¥æŠŠè¿™å¹…ä»£ç ç®€åŒ–ä¸€ä¸‹</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compose</span>(<span class="params">middleware</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">context, next</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> index = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">return</span> dispatch(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">dispatch</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">      index = i;</span><br><span class="line">      <span class="keyword">let</span> fn = middleware[i];</span><br><span class="line">      <span class="keyword">if</span> (i === middleware.length) &#123;</span><br><span class="line">        fn = next;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (!fn) <span class="keyword">return</span>;</span><br><span class="line">      <span class="keyword">return</span> fn(context, <span class="function"><span class="keyword">function</span> <span class="title">next</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dispatch(i + <span class="number">1</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> ms = [</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">ctx, next</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"1"</span>);</span><br><span class="line">    next();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"3"</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">ctx, next</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"2"</span>);</span><br><span class="line">    next();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"3"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line">compose(ms)();</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä¼šæƒŠå¥‡çš„å‘ç°è¿™æ®µä»£ç çš„æ‰§è¡Œç»“æœç«Ÿç„¶å’Œ koajs çš„ä¸­é—´ä»¶é¡ºåºä¸€æ¨¡ä¸€æ ·ã€‚<br>è§‚å¯Ÿå‘ç°æˆ‘ä»¬æ˜¯æŠŠ <code>Promise</code> å¯¹è±¡ç›¸å…³çš„å†…å®¹å»æ‰ï¼Œæ¢ä¸ºåŸå§‹çš„å›è°ƒå‡½æ•°å®ç°ã€‚</p>
<p>So,è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å›åˆ°äº†æœ€æœ€æœ€åˆçš„èµ·ç‚¹å°±æ˜¯å›è°ƒå‡½æ•°ä¸å¼‚æ­¥ã€‚å¯¹äºä¸­é—´ä»¶æ•°ç»„æ¥è¯´ï¼Œä»<code>index</code>=0 å¼€å§‹æ‰§è¡Œï¼Œå½“åœ¨æŸä¸ªä¸­é—´ä»¶ä¸­æ‰§è¡Œ<code>next()</code>çš„æ—¶å€™ï¼Œå…¶å®å°±è¡Œåœ¨æ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œä¾æ¬¡ä¸€ç›´æ‰§è¡Œåˆ°è¿™ä¸ªæ¬¡åºç»“æŸã€‚é‚£ä¹ˆåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­<code>next()</code>ä¹‹åçš„ä»£ç åœ¨ js çš„äº‹ä»¶æœºåˆ¶æ¥è¯´å°±ä¼šè¢«æ”¾å…¥ä¸€ä¸ªäº‹ä»¶â€œé˜Ÿåˆ—â€é‡Œã€‚<br>ç„¶è€Œï¼Œè¿™ä¸ªé˜Ÿåˆ—æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ ˆï¼Œéµå¾ªå…ˆè¿›åå‡ºå’Œåè¿›å…ˆå‡ºçš„åŸåˆ™ï¼Œæ‰€ä»¥åˆ°æœ€åä¸€ä¸ªçš„æ—¶å€™åˆä¼šæŒ‰ç…§é€†åºæ‰§è¡Œä¸€éã€‚<br>è¿™æ—¶å€™å†å›å¤´å»çœ‹ä¹‹å‰çš„æºç å°±ä¼šå‘ç°ç®€å•å¤šäº†</p>
<h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>æ€»ä¹‹è¿˜æ˜¯æ„Ÿè§‰æ˜¯å¯¹æ–°ç‰¹æ€§çš„æŒæ¡åº¦ä¸å¤Ÿï¼ŒåŒæ ·çš„é“ç†åŠ ä¸€äº›å¹²æ‰°å°±ä¼šå½±å“ç†è§£ä¸Šçš„è¿›åº¦ã€‚<br>æ¬¢è¿åæ§½ã€‚</p>
]]></content>
      <categories>
        <category>Node.js</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>Nodejs</tag>
        <tag>Koa</tag>
      </tags>
  </entry>
  <entry>
    <title>ES APIæ¢åº•ç³»åˆ—ï¼ˆä¸€ï¼‰ï¼šArray</title>
    <url>/blog/2018/05/23/ES%20API%E6%8E%A2%E5%BA%95%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9AArray/</url>
    <content><![CDATA[<p>è¿™æ®µæ—¶é—´å·¥ä½œä¸å¤ªé¥±å’Œï¼Œè¶ç°åœ¨è¡¥è¡¥åŸºç¡€ï¼Œå†™è¿™ä¸ªç³»åˆ—çš„ç›®çš„åªæœ‰ä¸€ä¸ªå°±æ˜¯å¤ä¹ ã€‚<br>æ¯•ç«Ÿå†™åšå®¢çš„è¿‡ç¨‹åœ¨äºçºªå½•å’Œæˆé•¿ï¼Œç»“æœåªæ˜¯æ¬¡è¦çš„ã€‚<br>ä¸åŒ…å«å·²ç»åºŸå¼ƒæ‰çš„æ–¹æ³•ã€‚<br><a id="more"></a></p>
<p>JS ä¸­çš„æ•°ç»„æ˜¯ç±»ä¼¼äºåˆ—è¡¨çš„ä¸€ç§é«˜é˜¶å¯¹è±¡</p>
<h2 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h2><h3 id="Array-length"><a href="#Array-length" class="headerlink" title="Array.length"></a>Array.length</h3><p>length å±æ€§çš„å€¼æ˜¯ä¸€ä¸ª 0 åˆ° 2^32-1 çš„æ•´æ•°ã€‚<br><code>length</code>æ˜¯ Array å®ä¾‹çš„ä¸€ä¸ªå±æ€§ï¼Œå®ƒå¯ä»¥è¢«æ˜¾å¼è®¾ç½®ï¼Œå¦‚æœè®¾ç½®è¶…è¿‡æ•°ç»„é•¿åº¦çš„å€¼ï¼Œå¤šå‡ºæ¥çš„éƒ¨åˆ†ä¼šè¢«è®¾ç½®ä¸º<code>undefined</code>ï¼Œå¦‚æœè®¾ç½®ä¸ºå°äºæ•°ç»„é•¿åº¦çš„å€¼åˆ™æ•°ç»„ä¼šè¢«æˆªæ–­ã€‚</p>
<h3 id="Array-prototype"><a href="#Array-prototype" class="headerlink" title="Array.prototype"></a>Array.prototype</h3><p>æ˜¯<code>Array</code>æ„é€ å‡½æ•°çš„åŸå‹ï¼Œé€šè¿‡ç»™å®ƒè®¾ç½®æ–¹æ³•æˆ–è€…å±æ€§å¯ä¾›æ‰€æœ‰æ•°ç»„ä½¿ç”¨ã€‚<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Array</span>.isArray(<span class="built_in">Array</span>.prototype); </span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><h3 id="Array-from"><a href="#Array-from" class="headerlink" title="Array.from()"></a>Array.from()</h3><p><code>Array.from(arrayLike[, mapFn[, thisArg]])</code>ä»ä¸€ä¸ªç±»ä¼¼æ•°ç»„æˆ–å¯è¿­ä»£å¯¹è±¡ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.from(<span class="string">'foo'</span>));</span><br><span class="line"><span class="comment">// expected output: Array ["f", "o", "o"]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.from([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], x =&gt; x + x));</span><br><span class="line"><span class="comment">// expected output: Array [2, 4, 6]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ•°ç»„å»é‡</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">combine</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">    <span class="keyword">let</span> arr = [].concat.apply([], <span class="built_in">arguments</span>);  <span class="comment">//æ²¡æœ‰å»é‡å¤çš„æ–°æ•°ç»„ </span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(arr));</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">var</span> m = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>], n = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>]; </span><br><span class="line"><span class="built_in">console</span>.log(combine(m,n));                     <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure></p>
<h3 id="Array-isArray"><a href="#Array-isArray" class="headerlink" title="Array.isArray()"></a>Array.isArray()</h3><p><code>Array.isArray(obj)</code>ç¡®å®šä¼ çš„å€¼æ˜¯ä¸æ˜¯ä¸€ä¸ª <code>Array</code>ã€‚<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸‹é¢çš„å‡½æ•°è°ƒç”¨éƒ½è¿”å› true</span></span><br><span class="line"><span class="built_in">Array</span>.isArray([]);</span><br><span class="line"><span class="built_in">Array</span>.isArray([<span class="number">1</span>]);</span><br><span class="line"><span class="built_in">Array</span>.isArray(<span class="keyword">new</span> <span class="built_in">Array</span>());</span><br><span class="line"><span class="comment">// é²œä¸ºäººçŸ¥çš„äº‹å®ï¼šå…¶å® Array.prototype ä¹Ÿæ˜¯ä¸€ä¸ªæ•°ç»„ã€‚</span></span><br><span class="line"><span class="built_in">Array</span>.isArray(<span class="built_in">Array</span>.prototype); </span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸‹é¢çš„å‡½æ•°è°ƒç”¨éƒ½è¿”å› false</span></span><br><span class="line"><span class="built_in">Array</span>.isArray();</span><br><span class="line"><span class="built_in">Array</span>.isArray(&#123;&#125;);</span><br><span class="line"><span class="built_in">Array</span>.isArray(<span class="literal">null</span>);</span><br><span class="line"><span class="built_in">Array</span>.isArray(<span class="literal">undefined</span>);</span><br><span class="line"><span class="built_in">Array</span>.isArray(<span class="number">17</span>);</span><br><span class="line"><span class="built_in">Array</span>.isArray(<span class="string">'Array'</span>);</span><br><span class="line"><span class="built_in">Array</span>.isArray(<span class="literal">true</span>);</span><br><span class="line"><span class="built_in">Array</span>.isArray(<span class="literal">false</span>);</span><br><span class="line"><span class="built_in">Array</span>.isArray(&#123; <span class="attr">__proto__</span>: <span class="built_in">Array</span>.prototype &#125;);</span><br></pre></td></tr></table></figure></p>
<p>å°½é‡ä½¿ç”¨<code>isArray</code>è€Œä¸æ˜¯<code>instanceof</code>,å‰è€…å¯ä»¥æ£€æµ‹ iframesã€‚</p>
<h3 id="Array-of"><a href="#Array-of" class="headerlink" title="Array.of()"></a>Array.of()</h3><p><code>Array.of(num)</code> è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º num çš„æ•°ç»„ï¼Œæ˜¯ç©ºä½ä¸æ˜¯ undefinedã€‚</p>
<h3 id="Array-prototype-contact"><a href="#Array-prototype-contact" class="headerlink" title="Array.prototype.contact()"></a>Array.prototype.contact()</h3><p><code>contact(arr1,arr2..)</code>ç”¨äºåˆå¹¶ä¸€ä¸ªæˆ–å¤šä¸ªæ•°ç»„ã€‚ä¼šè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> array1 = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</span><br><span class="line"><span class="keyword">var</span> array2 = [<span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(array1.concat(array2));</span><br><span class="line"><span class="comment">// expected output: Array ["a", "b", "c", "d", "e", "f"]</span></span><br></pre></td></tr></table></figure></p>
<h3 id="Array-prototype-copyWithin"><a href="#Array-prototype-copyWithin" class="headerlink" title="Array.prototype.copyWithin()"></a>Array.prototype.copyWithin()</h3><p><code>copyWithin(target, start, end)</code>æµ…å¤åˆ¶æ•°ç»„çš„ä¸€éƒ¨åˆ†åˆ°åŒä¸€æ•°ç»„çš„å¦ä¸€ä¸ªä½ç½®ï¼Œå¹¶ä¸”è¿”å›ï¼ŒåŸæ•°ç»„ä¼šè¢«ä¿®æ”¹ï¼Œè¢«ç§»åŠ¨çš„éƒ¨åˆ†å¤§å°ä¸ä¼šè¢«æ”¹å˜ã€‚è¿™ä¸ªæ–¹æ³•çš„ä¸‰ä¸ªå‚æ•°éƒ½æ˜¯æ•´æ•°ã€‚<br>å¦‚æœ<code>target</code>å¤§äºæ•°ç»„çš„<code>length</code>ï¼Œä¸ä¼šè¢«æ‹·è´ã€‚å¦‚æœ<code>target</code>åœ¨<code>start</code>ä¹‹åï¼Œå°†ä¼šè¢«ä¿®æ”¹ã€‚<br>å¦‚æœ<code>start</code>æˆ–è€…<code>end</code>ä¸ºè´Ÿæ•°ï¼Œä¼šä»æœ«å°¾å¼€å§‹è®¡ç®—ã€‚<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> array1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// place at position 0 the element between position 3 and 4</span></span><br><span class="line"><span class="built_in">console</span>.log(array1.copyWithin(<span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>));</span><br><span class="line"><span class="comment">// expected output: Array [4, 2, 3, 4, 5]</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">-2</span>, <span class="number">-3</span>, <span class="number">-1</span>);</span><br><span class="line"><span class="comment">// [1, 2, 3, 3, 4]</span></span><br></pre></td></tr></table></figure></p>
<h3 id="Array-prototype-entries"><a href="#Array-prototype-entries" class="headerlink" title="Array.prototype.entries()"></a>Array.prototype.entries()</h3><p><code>entries()</code>è¿”å›ä¸€ä¸ªæ–°çš„<strong>Array Iterator</strong>å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„æ•°ç»„ä¸­æ¯ä¸ªç´¢å¼•çš„é”®å€¼ã€‚<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> array1 = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> iterator1 = array1.entries();</span><br><span class="line"><span class="built_in">console</span>.log(iterator1.next().value);</span><br><span class="line"><span class="comment">// expected output: Array [0, "a"]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(iterator1.next().value);</span><br><span class="line"><span class="comment">// expected output: Array [1, "b"]</span></span><br></pre></td></tr></table></figure></p>
<h3 id="Array-prototype-every"><a href="#Array-prototype-every" class="headerlink" title="Array.prototype.every()"></a>Array.prototype.every()</h3><p><code>every(callback, thisArg)</code>æ–¹æ³•æµ‹è¯•æ•°ç»„çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½é€šè¿‡äº†æŒ‡å®šå‡½æ•°çš„æµ‹è¯•ã€‚<br>å¦‚æœæ•°ç»„çš„æ‰€æœ‰å…ƒç´ éƒ½é€šè¿‡äº†<code>callback</code>ï¼Œè¿™ä¸ªæ–¹æ³•åˆ™è¿”å›<code>true</code>ï¼Œåä¹‹åˆ™è¿”å›<code>false</code>ã€‚<br><code>callback</code>å‚æ•°ä¸ºæµ‹è¯•å‡½æ•°ï¼Œ<code>thisArg</code>å‚æ•°å¯ä»¥æŒ‡å®šæ‰§è¡Œ<code>callback</code>æ—¶<code>this</code>çš„å€¼ã€‚<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isBigEnough</span>(<span class="params">element, index, array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (element &gt;= <span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> passed = [<span class="number">12</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">130</span>, <span class="number">44</span>].every(isBigEnough);</span><br><span class="line"><span class="comment">// passed is false</span></span><br><span class="line">passed = [<span class="number">12</span>, <span class="number">54</span>, <span class="number">18</span>, <span class="number">130</span>, <span class="number">44</span>].every(isBigEnough);</span><br><span class="line"><span class="comment">// passed is true</span></span><br></pre></td></tr></table></figure></p>
<h3 id="Array-prototype-fill"><a href="#Array-prototype-fill" class="headerlink" title="Array.prototype.fill()"></a>Array.prototype.fill()</h3><p><code>fill(value, start, end)</code>ç”¨ä¸€ä¸ªå›ºå®šå€¼å¡«å……æ•°ç»„çš„æŸä¸€éƒ¨åˆ†ï¼Œä¸åŒ…æ‹¬<code>end</code>ç´¢å¼•ã€‚<br>å‚æ•°<code>start</code>å’Œ<code>end</code>é»˜è®¤å€¼åˆ†åˆ«ä¸º0å’Œæ•°ç»„çš„<code>length</code>ã€‚<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].fill(<span class="number">4</span>);               <span class="comment">// [4, 4, 4]</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].fill(<span class="number">4</span>, <span class="number">1</span>);            <span class="comment">// [1, 4, 4]</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].fill(<span class="number">4</span>, <span class="number">-3</span>, <span class="number">-2</span>);       <span class="comment">// [4, 2, 3]</span></span><br></pre></td></tr></table></figure></p>
<h3 id="Array-prototype-filter"><a href="#Array-prototype-filter" class="headerlink" title="Array.prototype.filter()"></a>Array.prototype.filter()</h3><p><code>filter(callback(element, index, array))[thisArg]</code>æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„, å…¶åŒ…å«é€šè¿‡æ‰€æä¾›å‡½æ•°å®ç°çš„æµ‹è¯•çš„æ‰€æœ‰å…ƒç´ ã€‚<br><code>callback</code>å‚æ•°æ˜¯ç”¨æ¥æµ‹è¯•çš„å‡½æ•°ã€‚<code>element</code>å½“å‰æ­£åœ¨å¤„ç†çš„å…ƒç´ ã€‚<code>index</code>æ­£åœ¨å¤„ç†çš„å…ƒç´ çš„ç´¢å¼•ã€‚<code>array</code>è°ƒç”¨äº†filterçš„æ•°ç»„ã€‚<code>thisArg</code>æ‰§è¡Œ<code>callback</code>æ—¶çš„ç”¨äºthisçš„å€¼ã€‚</p>
<h3 id="Array-prototype-find"><a href="#Array-prototype-find" class="headerlink" title="Array.prototype.find()"></a>Array.prototype.find()</h3><h3 id="Array-prototype-findIndex"><a href="#Array-prototype-findIndex" class="headerlink" title="Array.prototype.findIndex()"></a>Array.prototype.findIndex()</h3><h3 id="ğŸ”-Array-prototype-flat"><a href="#ğŸ”-Array-prototype-flat" class="headerlink" title="ğŸ” Array.prototype.flat()"></a>ğŸ” Array.prototype.flat()</h3><h3 id="ğŸ”-Array-prototype-flatMap"><a href="#ğŸ”-Array-prototype-flatMap" class="headerlink" title="ğŸ” Array.prototype.flatMap()"></a>ğŸ” Array.prototype.flatMap()</h3><h3 id="Array-prototype-forEach"><a href="#Array-prototype-forEach" class="headerlink" title="Array.prototype.forEach()"></a>Array.prototype.forEach()</h3><h3 id="Array-prototype-includes"><a href="#Array-prototype-includes" class="headerlink" title="Array.prototype.includes()"></a>Array.prototype.includes()</h3><h3 id="Array-prototype-indexOf"><a href="#Array-prototype-indexOf" class="headerlink" title="Array.prototype.indexOf()"></a>Array.prototype.indexOf()</h3><h3 id="Array-prototype-join"><a href="#Array-prototype-join" class="headerlink" title="Array.prototype.join()"></a>Array.prototype.join()</h3><h3 id="Array-prototype-keys"><a href="#Array-prototype-keys" class="headerlink" title="Array.prototype.keys()"></a>Array.prototype.keys()</h3>]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>MDN</tag>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>å¿«é€Ÿä¸Šæ‰‹--react</title>
    <url>/blog/2018/05/11/%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B-react/</url>
    <content><![CDATA[<h1 id="é¡¹ç›®å¿«é€Ÿä¸Šæ‰‹"><a href="#é¡¹ç›®å¿«é€Ÿä¸Šæ‰‹" class="headerlink" title="é¡¹ç›®å¿«é€Ÿä¸Šæ‰‹"></a>é¡¹ç›®å¿«é€Ÿä¸Šæ‰‹</h1><p> ä½œä¸ºä¸€ä¸ªå®ä¹ ç”Ÿæˆ–è€…æ–°äººæˆ–è€… ï¼Œç¬¬ä¸€æ¬¡ç”¨ <strong>react</strong> è¿›è¡Œé¡¹ç›®å¼€å‘æ—¶ï¼Œä¼šé‡åˆ°ä¸åŒç¨‹åº¦çš„å›°éš¾ï¼Œæˆ‘åœ¨æœ¬æ–‡å°± <code>ä¸°å†œ</code> é¡¹ç›®çš„å¿ƒå¾—ç»“åˆä¸€äº› react ç¼–ç¨‹æ€æƒ³åšä¸€ä¸ªå°å°çš„æ€»ç»“ï¼Œä»¥ä¾¿äº  å­¦ä¹ æˆ–è€…åˆ©äºåæ¥æ–°äººå¿«é€Ÿä¸Šæ‰‹ã€‚</p>
<a id="more"></a>
<p><br>ä¸»è¦ä»ä¸‰ä¸ªä¸ªæ–¹é¢å±•å¼€ï¼š</p>
<ol>
<li> æ•°æ®é©±åŠ¨æµæ€æƒ³</li>
<li>å›¢é˜Ÿå¼€å‘</li>
<li>React + Redux</li>
</ol>
<h2 id="1-æ•°æ®é©±åŠ¨æµæ€æƒ³"><a href="#1-æ•°æ®é©±åŠ¨æµæ€æƒ³" class="headerlink" title="1.æ•°æ®é©±åŠ¨æµæ€æƒ³"></a>1.æ•°æ®é©±åŠ¨æµæ€æƒ³</h2><blockquote>
<p> å¦‚æœä¹‹å‰æœ‰å‰ç«¯ <strong>MV*</strong> æ¡†æ¶é¡¹ç›®å¼€å‘ç»éªŒï¼Œå¯ä»¥ç•¥è¿‡æ­¤èŠ‚</p>
</blockquote>
<p>ä½•ä¸ºæ•°æ®é©±åŠ¨æµï¼Œä¸ªäººè§‰å¾—åªæœ‰å¾ˆå¥½çš„ç†è§£äº†è¿™ä¸ªæ¦‚å¿µï¼Œæ‰èƒ½æ‰å¼€å‘è¿‡ç¨‹ä¸­å¾—å¿ƒåº”æ‰‹ã€‚ å‡è®¾æ•°æ®ï¼ˆd è¡¨ç¤ºï¼‰ä¸è§†å›¾ï¼ˆV è¡¨ç¤ºï¼‰ä¹‹é—´å­˜åœ¨ä¸€ç§ç‰¹æ®Šå…³ç³»ï¼Œå¯ä»¥æ˜¯è¿™æ ·ï¼š</p>
<p>$$V=f(d)$$</p>
<p>æ•°æ®å˜åŒ–æ—¶æ—¶ï¼š</p>
<p>$$V + \Delta V =f(d+\Delta d)$$</p>
<p>ç›¸åº”çš„  è§†å›¾ä¹Ÿä¹Ÿå‘ç”Ÿäº†å˜åŒ–ï¼Œ$f$ å³ä¸ºä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚å…³äº$\Delta d$,å®ƒæ˜¯ç”±æŸä¸ªæ“ä½œå¼•èµ·çš„ï¼Œå¯ä»¥æŠŠè¿™ä¸ªæ“ä½œç±»æ¯”ä¸º <code>reduce</code>, æ¯ä¸€æ¬¡çš„çŠ¶æ€å˜æ›´ç»¼åˆèµ·æ¥å°±ä¼šæ¸²æŸ“æœ€åçš„è§†å›¾ã€‚</p>
<p>æ‰€æœ‰æˆ‘ä»¬çš„é¡¹ç›®ä¸ç®¡ä»»ä½•ç»„ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ç»´æŠ¤çš„åªæ˜¯æ•°æ®å’Œå¦‚ä½•æ“ä½œæ•°æ®ã€‚</p>
<h2 id="2-React-Redux"><a href="#2-React-Redux" class="headerlink" title="2.React + Redux"></a>2.React + Redux</h2><h3 id="React"><a href="#React" class="headerlink" title="React"></a>React</h3><h4 id="ç»„ä»¶"><a href="#ç»„ä»¶" class="headerlink" title="ç»„ä»¶"></a>ç»„ä»¶</h4><ul>
<li>æ— çŠ¶æ€ç»„ä»¶ï¼ˆStateless Functional Componentï¼‰<ul>
<li>1.ä¸æä¾› stateï¼Œrefsï¼Œç”Ÿå‘½å‘¨æœŸ  ç­‰å±æ€§æ–¹æ³•</li>
<li>2. ä¸€èˆ¬ç”¨ä½œå±•ç¤ºç»„ä»¶</li>
</ul>
</li>
<li>æœ‰çŠ¶æ€ç»„ä»¶ï¼ˆComponentï¼‰<ul>
<li>1.<code>render()</code>å‡½æ•°ä¸­  å°½é‡  åªä¿ç•™ return è¯­å¥å’Œ this.propsã€‚</li>
</ul>
</li>
</ul>
<h4 id="å¼€å‘-tips"><a href="#å¼€å‘-tips" class="headerlink" title="å¼€å‘ tips"></a>å¼€å‘ tips</h4><ul>
<li> å¯¹äºå…¬å…±å‡½æ•°å°è£…ï¼Œå¯å…ˆæŸ¥çœ‹@utils æ–‡ä»¶ä»¶ï¼Œå¦‚æœæœ‰ä½¿ç”¨å³å¯ï¼Œå¦‚æœæ²¡æœ‰å¯å¯¹å…¶è¡¥å……ï¼Œå¦‚æœéœ€è¦æ–°å»ºï¼Œåœ¨æ­¤ä¹‹å‰éœ€è¦æ€è€ƒå¯è¡Œæ€§ï¼Œæ–Ÿé…Œä»£ç é‡å’Œå¯è¯»æ€§çš„åŸºç¡€ä¸Šè¿›è¡Œå°è£… ğŸ“¦ã€‚</li>
<li><p> ä¸€èˆ¬çš„é¡¹ç›®ç›®å½•ï¼ˆcomponents,container,store çš„æ–‡ä»¶å¤¹åç§°ä¸€èˆ¬æ˜¯ä¸€ä¸€å¯¹åº”ã€‚ï¼‰</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">src</span><br><span class="line">|-assets/   // é™æ€èµ„æºåŒ…  </span><br><span class="line">|-components/   // è§†å›¾ç»„ä»¶</span><br><span class="line">|-container/    // å®¹å™¨ç»„ä»¶</span><br><span class="line">|-layouts/  // é¡µé¢ç»“æ„ç»„ä»¶</span><br><span class="line">|-store/    // redux</span><br><span class="line">|-utils/    //  å·¥å…·å‡½æ•°åŒ…</span><br><span class="line">|-app.js    // è·¯ç”±</span><br><span class="line">|-index.js  // é¡¹ç›®å…¥å£</span><br><span class="line">|-index.scss    // å…¨å±€æ ·å¼</span><br><span class="line">|-theme.js  // antd ä¸»é¢˜æ–‡ä»¶</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p><a href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0" target="_blank" rel="noopener">å±•ç¤ºå’Œå®¹å™¨ç»„ä»¶</a>ç”± react å¼€å‘è€… <a href="https://github.com/gaearon" target="_blank" rel="noopener">dan</a>æå‡º</p>
</blockquote>
<h3 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h3><p><a href="https://cn.redux.js.org/" target="_blank" rel="noopener">åŸºæœ¬æ¦‚å¿µ</a>ï¼Œå¿«é€Ÿå…¥é—¨å¯ä»¥ <a href="https://github.com/berwin/Blog/issues/4" target="_blank" rel="noopener">å‚è€ƒè¿™é‡Œ</a><br><br> ä¾‹å¦‚ä¸°å†œé¡¹ç›®ä¸­ä½¿ç”¨äº†<code>react-redux</code>,éœ€è¦ç†è§£  ä»¥ä¸‹å‡ ä¸ªæ¦‚å¿µ</p>
<ul>
<li>Provider ç»„ä»¶ä¿å­˜ store ç»™å­ç»„ä»¶ä¸­çš„ connect ä½¿ç”¨</li>
<li>Connect æŠŠ State å’Œ dispatch è½¬æ¢æˆ props ä¼ é€’ç»™å­ç»„ä»¶ã€‚</li>
</ul>
<h4 id="tips"><a href="#tips" class="headerlink" title="tips"></a>tips</h4><ul>
<li>ä¿æŒ fetch å‚æ•°çš„çº¯æ´æ€§ï¼Œæå‡ä»£ç å¯è¯»æ€§</li>
<li>fetch ä¹‹åçš„ç›¸åŒæ“ä½œå¯ä»¥è¿›è¡Œå¤„ç† ä¾‹å¦‚ï¼šloading æ“ä½œâ€¦.</li>
</ul>
<h2 id="3-å›¢é˜Ÿå¼€å‘"><a href="#3-å›¢é˜Ÿå¼€å‘" class="headerlink" title="3.å›¢é˜Ÿå¼€å‘"></a>3.å›¢é˜Ÿå¼€å‘</h2><h3 id="ä»£ç é£æ ¼"><a href="#ä»£ç é£æ ¼" class="headerlink" title=" ä»£ç é£æ ¼"></a> ä»£ç é£æ ¼</h3><p>å…³äºä»£ç é£æ ¼ï¼Œå·²ç»æœ‰äº†å¾ˆå®Œå–„çš„ lint å·¥å…·ï¼Œä¾‹å¦‚ï¼šESlintã€‚</p>
<p> æˆ‘æƒ³è¡¥å……çš„å°±æ˜¯å¦‚æœä½ ä½¿ç”¨çš„  ç¼–è¾‘å™¨  æ˜¯ VScodeï¼Œå¯ä»¥åœ¨æ‹“å±•å¸‚åœºå¯»æ‰¾é€‚åˆè‡ªå·±çš„æ ¼å¼åŒ–å·¥å…·ï¼Œæ¯”å¦‚ Prettierï¼Œ å®ƒåœ¨æ ¼å¼åŒ–çš„æ—¶å€™æ•°æ®æºæ˜¯ .eslintrcã€‚</p>
<h3 id="è½¯æŠ€èƒ½"><a href="#è½¯æŠ€èƒ½" class="headerlink" title="è½¯æŠ€èƒ½"></a>è½¯æŠ€èƒ½</h3><ol>
<li>æ²Ÿé€š</li>
</ol>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>é¡¹ç›®</tag>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>Reduxå­¦ä¹ æ€»ç»“</title>
    <url>/blog/2018/03/20/Redux%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<p>Redux çš„å­¦ä¹ å¿ƒå¾—ï¼Œå¾…ä¿®æ”¹</p>
<a id="more"></a>
<h2 id="1-Action"><a href="#1-Action" class="headerlink" title="1.Action"></a>1.Action</h2><p>Action æ˜¯ä¸€ä¸ª JS å¯¹è±¡ï¼Œæ˜¯å¯¹è¡Œä¸ºç±»å‹çš„ä¸€ä¸ªæè¿°æˆ–è€…æ˜¯æ·»åŠ æ•°æ®æ—¶çš„å…·ä½“æ•°æ®ï¼Œæˆ–è€…åˆ é™¤æ•°æ®æ˜¯çš„æ•°æ®é¡¹ idï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">Â·Â·Â·</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"type"</span>: <span class="string">"ADD_TODO"</span>,</span><br><span class="line">  <span class="string">"text"</span>: <span class="string">"Back School"</span></span><br><span class="line">&#125;</span><br><span class="line">Â·Â·Â·</span><br></pre></td></tr></table></figure>
<p>ä¸€èˆ¬éœ€è¦ä¸€ä¸ªå«åš actionCreator çš„å‡½æ•°åˆ›å»º actionã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addItem</span>(<span class="params">text</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: <span class="string">"ADD_TODO"</span>,</span><br><span class="line">    text: text</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-Reducer"><a href="#2-Reducer" class="headerlink" title="2.Reducer"></a>2.Reducer</h2><p>Reducer å°±æ˜¯æ ¹æ® Action çš„æè¿°è¿›è¡Œå…·ä½“çš„æ•°æ®æ“ä½œï¼Œä¸€èˆ¬è·å¾—ä¸¤ä¸ªå‚æ•°<code>State</code>å’Œ<code>Action</code>,ä¸€èˆ¬æ ¹æ® Type çš„ç±»å‹æ›´æ–° Stateï¼Œä¸€èˆ¬ä¸ç›´æ¥ä¿®æ”¹ï¼Œè€Œæ˜¯è¿”å›æ–°çš„ <code>State</code>ã€‚æ¯”å¦‚ä¸Šé¢é‚£æ¡ Action:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">Â·Â·Â·</span><br><span class="line"><span class="keyword">case</span> ADD_TODO:</span><br><span class="line">      <span class="keyword">return</span> [</span><br><span class="line">        ...state,</span><br><span class="line">        &#123;</span><br><span class="line">          text: action.text,</span><br><span class="line">          completed: <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">Â·Â·Â·</span><br></pre></td></tr></table></figure>
<h3 id="combineReducers"><a href="#combineReducers" class="headerlink" title="combineReducers"></a>combineReducers</h3><p>è¿™ä¸ªå‡½æ•°ç”¨æ¥ç®¡ç†å„ä¸ªåˆ†ç¦»çš„å° Reducer</p>
<h2 id="3-Store"><a href="#3-Store" class="headerlink" title="3.Store"></a>3.Store</h2><p>Stroe å°±æ˜¯æ•´ä¸ªåº”ç”¨å­˜æ”¾æ•°æ®çš„åœ°æ–¹ï¼Œä¸€ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ª storeã€‚</p>
<blockquote>
<ul>
<li>store å¯ä»¥ç»´æŒåº”ç”¨çš„ state</li>
<li>æä¾› <strong>getState()</strong> æ–¹æ³•è·å– state</li>
<li>é€šè¿‡ <strong>dispatch(action)</strong> æ›´æ–° state</li>
<li>é€šè¿‡ <strong>subscribe(listener)</strong> æ³¨å†Œç›‘å¬å™¨</li>
<li><strong>replaceReducer</strong>ç”¨æ¥æ›¿æ¢ store å½“å‰ç”¨æ¥å¤„ç† state çš„ reducer</li>
</ul>
</blockquote>
<h2 id="4-Redux-æµç¨‹å›¾"><a href="#4-Redux-æµç¨‹å›¾" class="headerlink" title="4.Redux æµç¨‹å›¾"></a>4.Redux æµç¨‹å›¾</h2><p><img src="https://camo.githubusercontent.com/76224d874f32535aa62c0cd01750fb71fb02cf53/687474703a2f2f70362e7168696d672e636f6d2f642f696e6e2f39613331326463632f7265647578466c6f772e706e67" alt="redux-process"></p>
<h2 id="5-react-redux"><a href="#5-react-redux" class="headerlink" title="5.react-redux"></a>5.react-redux</h2><h3 id="Provider"><a href="#Provider" class="headerlink" title="Provider"></a>Provider</h3><p>Provider æ˜¯ä¸€ä¸ª React ç»„ä»¶ï¼Œä½œç”¨æ˜¯ä¿å­˜ store ç»™å­ç»„ä»¶ä¸­çš„ connect ä½¿ç”¨</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;Provider store=&#123;<span class="keyword">this</span>.props.store&#125;&gt;</span><br><span class="line">  &lt;h1&gt;hello world!&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>Provider&gt;</span><br></pre></td></tr></table></figure>
<h3 id="Connect"><a href="#Connect" class="headerlink" title="Connect"></a>Connect</h3><p>Connect æŠŠ State å’Œ dispatch è½¬æ¢æˆ props ä¼ é€’ç»™å­ç»„ä»¶ã€‚</p>
<pre><code class="jsx">
</code></pre>
<h3 id="mapStateToProps"><a href="#mapStateToProps" class="headerlink" title="mapStateToProps"></a>mapStateToProps</h3><h3 id="mapDispatchToProps"><a href="#mapDispatchToProps" class="headerlink" title="mapDispatchToProps"></a>mapDispatchToProps</h3><h3 id="bindActionCreators"><a href="#bindActionCreators" class="headerlink" title="bindActionCreators"></a>bindActionCreators</h3>]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>å‰ç«¯</tag>
        <tag>React</tag>
        <tag>Redux</tag>
      </tags>
  </entry>
  <entry>
    <title>è¶…çº§ç®€å•çš„å‰ç«¯è‡ªåŠ¨åŒ–æ„å»º</title>
    <url>/blog/2017/12/26/%E8%B6%85%E7%BA%A7%E7%AE%80%E5%8D%95%E7%9A%84%E5%89%8D%E7%AB%AF%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%84%E5%BB%BA/</url>
    <content><![CDATA[<h2 id="ä¸ºä»€ä¹ˆè¦è‡ªåŠ¨åŒ–"><a href="#ä¸ºä»€ä¹ˆè¦è‡ªåŠ¨åŒ–" class="headerlink" title="ä¸ºä»€ä¹ˆè¦è‡ªåŠ¨åŒ–"></a>ä¸ºä»€ä¹ˆè¦è‡ªåŠ¨åŒ–</h2><blockquote>
<p>ä½ å¥½ï¼Œåˆ‡å›¾ä»”ï¼<br></p>
</blockquote>
<p>ç°åœ¨çš„å‰ç«¯æ—©å·²ä¸æ˜¯ç®€å•çš„é™æ€é¡µé¢å¼€å‘ï¼Œä¸€äº›å¤§å‹çš„ Web App åŠ¨è¾„å‡ åƒè¡Œç”šè‡³ä¸Šä¸‡è¡Œä»£ç ï¼Œæ‰€ä»¥å¦‚ä½•æ„å»ºæœ¬åœ°å¼€å‘ç¯å¢ƒå°¤ä¸ºé‡è¦ã€‚æœ¬ç¯‡æ–‡ç« å°†ä»¥ gulp ä¸ºä¾‹ï¼Œä»ç¼–è¯‘ã€æ–‡ä»¶åˆå¹¶ã€æ–‡ä»¶å‹ç¼©ã€å•å…ƒæµ‹è¯•ç­‰å‡ ä¸ªè§’åº¦ä»é›¶å¼€å§‹æ­å»ºä¸€ä¸ªç®€å•çš„å‰ç«¯å¼€å‘ç¯å¢ƒã€‚</p>
<a id="more"></a>
<p><strong>Github åœ°å€ï¼š<a href="https://github.com/donley828/gulp-demo" target="_blank">gulp-demo</a></strong></p>
<h2 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h2><p>æŠ›å¼€é¡¹ç›®ç±»å‹ï¼Œä¸€ä¸ªé¡¹ç›® Js æ–‡ä»¶å’Œç›®å½•ç»“æ„åº”è¯¥æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>ä¸€ä¸ªæ–‡ä»¶åªåŒ…å«ä¸€ä¸ªå¯¹è±¡</li>
<li>ç›¸å…³çš„æ–‡ä»¶ç”¨ç›®å½•åˆ†ç»„</li>
<li>ä¿æŒç¬¬ä¸‰æ–¹ä»£ç çš„ç‹¬ç«‹</li>
<li>ç¡®å®šåˆ›å»ºæ–‡ä½ç½®</li>
<li>ä¿æŒæµ‹è¯•ä»£ç çš„å®Œæ•´æ€§</li>
</ul>
<p>ä»¥ jQuery é¡¹ç›®çš„ç›®å½•ç»“æ„ä¸ºä¾‹<br><br><img src="/blog/images/jq.png" alt><br><br>buildï¼šç”¨æ¥æ”¾ç½®æœ€ç»ˆæ„å»ºåçš„æ–‡ä»¶ï¼ˆä¸åº”è¯¥è¢«æäº¤ï¼‰<br>srcï¼šç”¨æ¥æ”¾ç½®æ‰€æœ‰çš„æºæ–‡ä»¶ï¼ŒåŒ…æ‹¬ç”¨ä¾‹è¿›è¡Œæ–‡ä»¶åˆ†ç»„çš„å­ç›®å½•<br>testï¼šç”¨æ¥æ”¾ç½®æµ‹è¯•æ–‡ä»¶ï¼ŒåŒ…å«ä¸€äº›åŒæºä»£ç ç›®å½•å¯¹åº”çš„å­ç›®å½•æˆ–æ–‡ä»¶<br>externalï¼šç”¨æ¥å­˜æ”¾ä¸€äº›å¤–éƒ¨æ‹“å±•æ–‡ä»¶<br>Gruntfile.jsï¼šgrunt é…ç½®æ–‡ä»¶ï¼Œç”¨æ¥é…ç½®æˆ–å®šä¹‰ä»»åŠ¡å¹¶åŠ è½½ Grunt æ’ä»¶<br>package.jsonï¼šæè¿°äº†ä¸€ä¸ª NPM åŒ…çš„æ‰€æœ‰ç›¸å…³ä¿¡æ¯<br>.eslintrcï¼šEslint é…ç½®æ–‡ä»¶</p>
<h2 id="ä»é›¶å¼€å§‹"><a href="#ä»é›¶å¼€å§‹" class="headerlink" title="ä»é›¶å¼€å§‹"></a>ä»é›¶å¼€å§‹</h2><h3 id="åˆ›å»ºä¸€ä¸ª-Gulp-é¡¹ç›®"><a href="#åˆ›å»ºä¸€ä¸ª-Gulp-é¡¹ç›®" class="headerlink" title="åˆ›å»ºä¸€ä¸ª Gulp é¡¹ç›®"></a>åˆ›å»ºä¸€ä¸ª Gulp é¡¹ç›®</h3><p>å‡è®¾ä½ å·²ç»å®‰è£…äº† Nodeï¼Œé€šè¿‡<code>npm init</code>åˆå§‹åŒ–ä¸€ä¸ª<code>package.json</code>æ–‡ä»¶ ï¼Œç„¶åæ–°å»ºä¸€ä¸ª<code>gulpfile.js</code>æ–‡ä»¶ï¼Œæ‰§è¡Œ<code>npm install grunt --save-dev</code>å®‰è£… Gulpã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//gulpfile.js</span></span><br><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'default'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;);</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œ gulp</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ gulp</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨å‘½ä»¤<code>gulp</code>ä¼šä½¿é»˜è®¤æ˜¯çš„åä¸º default çš„ä»»åŠ¡ï¼ˆtaskï¼‰å°†ä¼šè¢«è¿è¡Œï¼Œæ­¤ç¤ºä¾‹æœªåšä»»ä½•äº‹æƒ…ã€‚</p>
<h3 id="ESLint"><a href="#ESLint" class="headerlink" title="ESLint"></a>ESLint</h3><p>åœ¨å›¢é˜Ÿå¼€å‘ä¸­ï¼Œç¼–ç¨‹é£æ ¼ï¼ˆstyle guidelineï¼‰å’Œç¼–ç è§„èŒƒï¼ˆcode conventionï¼‰çš„ä¸€è‡´æ€§æ˜¯åŠå…¶é‡è¦çš„ï¼Œå³æ—¶æ˜¯ç¼©è¿›ç»Ÿä¸€ï¼Œä¹Ÿä¼šç»™åæœŸç»´æŠ¤èŠ‚çœå¤§é‡çš„æ—¶é—´æˆæœ¬ã€‚æ‰€ä»¥ä½¿ç”¨åƒ ESLint è¿™æ ·çš„å·¥å…·æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œä¸ä»…å¯ä»¥æ‰¾å‡ºä»£ç ä¸­æ½œåœ¨çš„é”™è¯¯ï¼Œè€Œä¸”èƒ½é’ˆå¯¹ä½ çš„ä»£ç ç»™å‡ºç¼–ç¨‹é£æ ¼ä¸Šçš„è­¦å‘Šã€‚</p>
<p>å®‰è£… gulp-eslint</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm i --save-dev gulp-eslint</span><br></pre></td></tr></table></figure>
<p>ç»™<code>gulpfile</code>æ·»åŠ  lint ä»»åŠ¡</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">gulp.task(<span class="string">'lint'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .src([<span class="string">'**/*.js'</span>, <span class="string">'!node_modules/**'</span>])</span><br><span class="line">    .pipe(eslint())</span><br><span class="line">    .pipe(eslint.formatEach(<span class="string">'compact'</span>, process.stderr));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨-gulp-concat-å’Œ-gulp-uglify-åˆå¹¶å‹ç¼©"><a href="#ä½¿ç”¨-gulp-concat-å’Œ-gulp-uglify-åˆå¹¶å‹ç¼©" class="headerlink" title="ä½¿ç”¨ gulp-concat å’Œ gulp-uglify åˆå¹¶å‹ç¼©"></a>ä½¿ç”¨ gulp-concat å’Œ gulp-uglify åˆå¹¶å‹ç¼©</h3><p>å¦‚æœæ°å½“çš„ç»„ç»‡ javaScript æ–‡ä»¶ï¼Œé‚£ä¹ˆæ¯ä¸ªæ–‡ä»¶å°±åªåŒ…å«ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯ä¼šå¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä¼šå¢åŠ ç½‘ç»œè¯·æ±‚æ•°ã€‚æ‰€ä»¥åº”è¯¥å°†æ–‡ä»¶åˆå¹¶ï¼Œåˆå¹¶ä¹‹åè¿›è¡Œå‹ç¼©å·¥ä½œï¼Œå°½å¯èƒ½çš„ç¼©å°æ–‡ä»¶å¤§å°ã€‚</p>
<p>å®‰è£… gulp-concat å’Œ gulp-uglify</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm i --save-dev gulp-concat gulp-uglify</span><br></pre></td></tr></table></figure>
<p>æ·»åŠ  javaScript ä»»åŠ¡åˆ°<code>gulpfile.js</code>ä¸­</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">gulp.task(<span class="string">'javascript'</span>, [<span class="string">'lint'</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .src(<span class="string">'src/**/*.js'</span>)</span><br><span class="line">    .pipe(sourcemaps.init())</span><br><span class="line">    .pipe(concat(<span class="string">'all.js'</span>))</span><br><span class="line">    .pipe(uglify())</span><br><span class="line">    .pipe(sourcemaps.write())</span><br><span class="line">    .pipe(gulp.dest(<span class="string">'dist'</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>ç„¶åä¿®æ”¹<code>gulp.task(..)</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">gulp.task(<span class="string">'default'</span>, [<span class="string">'lint'</span>, <span class="string">'javascript'</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;);</span><br></pre></td></tr></table></figure>
<p>åˆå¹¶å’Œå‹ç¼©ä»»åŠ¡æ·»åŠ ç»“æŸä¹‹åæˆ‘ä»¬å¯ä»¥åœ¨<code>src</code>æ–‡ä»¶å¤¹é‡Œå°è¯•ä¸€ä¸‹,æ·»åŠ <code>add.js</code>å’Œ<code>multiply.js</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//add.js</span></span><br><span class="line"><span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = add;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//multiply.js</span></span><br><span class="line"><span class="keyword">var</span> multiply = <span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x * y;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = multiply;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œ<code>gulp</code>,æ§åˆ¶å°ä¼šè¾“å‡ºå¦‚ä¸‹å†…å®¹ï¼Œé¡¹ç›®ç›®å½•ä¼šç”Ÿæˆ<code>dist</code>æ–‡ä»¶å¤¹ï¼Œé‡Œé¢å­˜æ”¾å‹ç¼©å¹¶åˆå¹¶åçš„<code>all.js</code>æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ gulp</span><br><span class="line">[21:23:44] Using gulpfile gulpfile.js</span><br><span class="line">[21:23:44] Starting <span class="string">'lint'</span>...</span><br><span class="line">1 problem[21:23:45] Finished <span class="string">'lint'</span> after 657 ms</span><br><span class="line">[21:23:45] Starting <span class="string">'javascript'</span>...</span><br><span class="line">[21:23:45] Finished <span class="string">'javascript'</span> after 57 ms</span><br><span class="line">[21:23:45] Starting <span class="string">'default'</span>...</span><br><span class="line">[21:23:45] Finished <span class="string">'default'</span> after 29 Î¼s</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//all.js</span></span><br><span class="line"><span class="keyword">var</span> add=<span class="function"><span class="keyword">function</span>(<span class="params">r,t</span>)</span>&#123;<span class="keyword">return</span> r+t&#125;;<span class="built_in">module</span>.exports=add;<span class="keyword">var</span> multiply=<span class="function"><span class="keyword">function</span>(<span class="params">r,t</span>)</span>&#123;<span class="keyword">return</span> r*t&#125;;<span class="built_in">module</span>.exports=multiply;</span><br><span class="line"><span class="comment">//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZC5qcyIsIm11bHRpcGx5LmpzIl0sIm5hbWVzIjpbImFkZCIsIngiLCJ5IiwibW9kdWxlIiwiZXhwb3J0cyIsIm11bHRpcGx5Il0sIm1hcHBpbmdzIjoiQUFBQSxJQUFBQSxJQUFBLFNBQUFDLEVBQUFDLEdBQ0EsT0FBQUQsRUFBQUMsR0FHQUMsT0FBQUMsUUFBQUosSUNKQSxJQUFBSyxTQUFBLFNBQUFKLEVBQUFDLEdBQ0EsT0FBQUQsRUFBQUMsR0FHQUMsT0FBQUMsUUFBQUMiLCJmaWxlIjoiYWxsLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFkZCA9IGZ1bmN0aW9uKHgsIHkpIHtcclxuXHRyZXR1cm4geCArIHk7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGFkZDtcclxuIiwidmFyIG11bHRpcGx5ID0gZnVuY3Rpb24oeCwgeSkge1xyXG5cdHJldHVybiB4ICogeTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gbXVsdGlwbHk7XHJcbiJdfQ==</span></span><br></pre></td></tr></table></figure>
<h3 id="è‡ªåŠ¨åŒ–æµ‹è¯•"><a href="#è‡ªåŠ¨åŒ–æµ‹è¯•" class="headerlink" title="è‡ªåŠ¨åŒ–æµ‹è¯•"></a>è‡ªåŠ¨åŒ–æµ‹è¯•</h3><p>å®‰è£… gulp-mocha å’Œ chai ï¼Œå‰è€…æ˜¯ä¸€æ¬¾æµ‹è¯•æ¡†æ¶ï¼Œå°±æ˜¯è¿è¡Œæµ‹è¯•çš„å·¥å…·ï¼Œåœ¨æµè§ˆå™¨å’Œ Node ç¯å¢ƒéƒ½å¯ä»¥ä½¿ç”¨ï¼Œæ·»åŠ æµ‹è¯•ï¼Œä»è€Œä¿è¯ä»£ç çš„è´¨é‡ã€‚chai æ˜¯ä¸€æ¬¾ js æ–­è¨€åº“ï¼Œå°±æ˜¯åˆ¤æ–­æºç çš„å®é™…æ‰§è¡Œç»“æœä¸é¢„æœŸç»“æœæ˜¯å¦ä¸€è‡´ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm i --save-dev gulp-mocha chai</span><br></pre></td></tr></table></figure>
<p>ä¸º<code>add.js</code>å’Œ<code>multiply.js</code>æ·»åŠ æµ‹è¯•è„šæœ¬<code>add.test.js</code>å’Œ<code>multiply.test.js</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//add.test.js</span></span><br><span class="line"><span class="keyword">var</span> add = <span class="built_in">require</span>(<span class="string">'../src/add.js'</span>);</span><br><span class="line"><span class="keyword">var</span> expect = <span class="built_in">require</span>(<span class="string">'chai'</span>).expect;</span><br><span class="line"></span><br><span class="line">describe(<span class="string">'åŠ æ³•å‡½æ•°çš„æµ‹è¯•'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  it(<span class="string">'1 åŠ  1 åº”è¯¥ç­‰äº 2'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    expect(add(<span class="number">1</span>, <span class="number">1</span>)).to.be.equal(<span class="number">2</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//multiply.test.js</span></span><br><span class="line"><span class="keyword">var</span> multiply = <span class="built_in">require</span>(<span class="string">'../src/multiply.js'</span>);</span><br><span class="line"><span class="keyword">var</span> expect = <span class="built_in">require</span>(<span class="string">'chai'</span>).expect;</span><br><span class="line"></span><br><span class="line">describe(<span class="string">'ä¹˜æ³•å‡½æ•°çš„æµ‹è¯•'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  it(<span class="string">'2 ä¹˜ 2 åº”è¯¥ç­‰äº 4'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    expect(multiply(<span class="number">2</span>, <span class="number">2</span>)).to.be.equal(<span class="number">4</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><code>describe</code>å—ç§°ä¸ºâ€æµ‹è¯•å¥—ä»¶â€ï¼ˆtest suiteï¼‰ï¼Œè¡¨ç¤ºä¸€ç»„ç›¸å…³çš„æµ‹è¯•ã€‚å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµ‹è¯•å¥—ä»¶çš„åç§°ï¼ˆâ€åŠ æ³•å‡½æ•°çš„æµ‹è¯•â€ï¼‰ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå®é™…æ‰§è¡Œçš„å‡½æ•°ã€‚<br><code>it</code>å—ç§°ä¸ºâ€æµ‹è¯•ç”¨ä¾‹â€ï¼ˆtest caseï¼‰ï¼Œè¡¨ç¤ºä¸€ä¸ªå•ç‹¬çš„æµ‹è¯•ï¼Œæ˜¯æµ‹è¯•çš„æœ€å°å•ä½ã€‚å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµ‹è¯•ç”¨ä¾‹çš„åç§°ï¼ˆâ€1 åŠ  1 åº”è¯¥ç­‰äº 2â€ï¼‰ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå®é™…æ‰§è¡Œçš„å‡½æ•°ã€‚</p>
<p>æ·»åŠ  gulp ä»»åŠ¡</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">gulp.task(<span class="string">'test'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'test/*.test.js'</span>, &#123; <span class="attr">read</span>: <span class="literal">false</span> &#125;).pipe(</span><br><span class="line">    mocha(&#123;</span><br><span class="line">      reporter: <span class="string">'spec'</span></span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œ<code>gulp test</code>ï¼Œå¦‚ä¸‹è¾“å‡º</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[21:37:31] Starting <span class="string">'test'</span>...</span><br><span class="line">  åŠ æ³•å‡½æ•°çš„æµ‹è¯•</span><br><span class="line">    âˆš 1 åŠ  1 åº”è¯¥ç­‰äº 2</span><br><span class="line">  ä¹˜æ³•å‡½æ•°çš„æµ‹è¯•</span><br><span class="line">    âˆš 2 ä¹˜ 2 åº”è¯¥ç­‰äº 4</span><br><span class="line">  2 passing (6ms)</span><br><span class="line">[21:37:32] Finished <span class="string">'test'</span> after 502 ms</span><br></pre></td></tr></table></figure>
<p>è¡¨ç¤ºæµ‹è¯•é€šè¿‡</p>
<h2 id="Webpack"><a href="#Webpack" class="headerlink" title="Webpack"></a>Webpack</h2><p>Webpack æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„å‰ç«¯æ¨¡å—æ‰“åŒ…å™¨ï¼Œå®ƒå¯ä»¥æ‰¾åˆ° JavaScript æ¨¡å—ä»¥åŠå…¶å®ƒçš„ä¸€äº›æµè§ˆå™¨ä¸èƒ½ç›´æ¥è¿è¡Œçš„æ‹“å±•è¯­è¨€ï¼ˆScssï¼ŒTypeScript ç­‰ï¼‰ï¼Œå¹¶å°†å…¶è½¬æ¢å’Œæ‰“åŒ…ä¸ºåˆé€‚çš„æ ¼å¼ä¾›æµè§ˆå™¨ä½¿ç”¨ã€‚ä¸ Gulp/Grunt ç›¸æ¯”ï¼ŒGulp/Grunt æ˜¯ä¸€ç§èƒ½å¤Ÿä¼˜åŒ–å‰ç«¯å¼€å‘æµç¨‹çš„å·¥å…·ï¼ŒWebpack æ˜¯ä¸€ç§æ¨¡å—åŒ–çš„è§£å†³æ–¹æ¡ˆï¼ŒåŒæ—¶ Webpack åœ¨å¾ˆå¤šåœºæ™¯ä¸‹å¯ä»¥æ›¿ä»£ Gulp/Grunt è¿™ç±»å·¥å…·ã€‚æ‰€ä»¥ Webpack æ˜¯éå¸¸å€¼å¾—å­¦ä¹ çš„ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è¿™ç¯‡æ–‡ç« æ˜¯åœ¨è¯»å®Œ <a href="https://book.douban.com/subject/21792530/" target="_blank">ã€Šç¼–å†™å¯ç»´æŠ¤çš„ JavaScriptã€‹</a> è¿™æœ¬ä¹¦ä¹‹åï¼Œåšçš„æ€»ç»“æ€§å®è·µç±»æ–‡ç« ã€‚æ€»ä¹‹ï¼Œå¦‚ä»Šçš„å‰ç«¯å·¥ç¨‹åŒ–å®Œå–„ï¼Œæœ¬æ–‡çš„ä¾‹å­åªæ˜¯å¾ˆç®€å•çš„å†…å®¹ï¼Œ<code>gulp</code>çš„å…·ä½“ä½¿ç”¨ï¼Œå¤æ‚åº”ç”¨çš„æµ‹è¯•ç­‰å†…å®¹è¿˜æœ‰å¾…æ·±å…¥ã€‚</p>
<p><strong>Github åœ°å€ï¼š<a href="https://github.com/donley828/gulp-demo" target="_blank">gulp-demo</a></strong></p>
<blockquote>
<p>Reference:<br><a href="https://www.gulpjs.com.cn/" target="_blank">Gulp ä¸­æ–‡ç½‘</a><br><a href="http://www.ruanyifeng.com/blog/2015/12/a-mocha-tutorial-of-examples.html" target="_blank">æµ‹è¯•æ¡†æ¶ Mocha å®ä¾‹æ•™ç¨‹</a></p>
</blockquote>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>æ¨¡å—åŒ–</tag>
        <tag>è‡ªåŠ¨åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title>Javascriptæ¨¡å—åŒ–</title>
    <url>/blog/2017/10/16/Javascript%E6%A8%A1%E5%9D%97%E5%8C%96/</url>
    <content><![CDATA[<h1 id="Javascript-æ¨¡å—åŒ–"><a href="#Javascript-æ¨¡å—åŒ–" class="headerlink" title="Javascript æ¨¡å—åŒ–"></a>Javascript æ¨¡å—åŒ–</h1><p>å½“ä»Šçš„ç½‘ç«™å·²ç»é€æ¸å˜æˆçš„ Web åº”ç”¨ï¼Œç½‘é¡µå¼•å…¥çš„ Javascript æ–‡ä»¶ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œè¶Šæ¥è¶Šå¤æ‚ã€‚ç½‘é¡µå°±åƒæ¡Œé¢ç¨‹åºä¸€æ ·ï¼Œéœ€è¦ä¸€ç³»åˆ—è½¯ä»¶å·¥ç¨‹çš„æ–¹æ³•ï¼Œæ¥ç®¡ç†ç½‘é¡µçš„ä¸šåŠ¡é€»è¾‘ã€‚æ‰€ä»¥ Javascript æ¨¡å—åŒ–å°±æˆä¸ºäº†ä¸€ç§è¿«åˆ‡çš„éœ€æ±‚ã€‚ä½†æ˜¯ Javascript åˆæ²¡æœ‰åƒ JAVA è¯­è¨€ä¸­çš„ç±»ç‰¹æ€§ï¼Œæ‰€ä»¥å¦‚ä½•å®ç°æ¨¡å—åŒ–å°±æˆäº†ä¸€ä¸ªéš¾é¢˜ã€‚ä»¤äººæ¬£æ…°çš„æ˜¯ï¼Œç»è¿‡ Javascript çš„ä¸€ç³»åˆ—åŠªåŠ›ï¼ŒJavascript æ¨¡å—åŒ–å·²ç»è¶‹äºæˆç†Ÿï¼Œæœ¬æ–‡å°†ä¼šæ€»ç»“æ¨¡å—åŒ–çš„å‡ ç§æ–¹æ³•ä»¥åŠæ¨¡å—åŒ–çš„è§„èŒƒã€‚</p>
<a id="more"></a>
<h2 id="å¦‚ä½•å®ç°æ¨¡å—åŒ–"><a href="#å¦‚ä½•å®ç°æ¨¡å—åŒ–" class="headerlink" title="å¦‚ä½•å®ç°æ¨¡å—åŒ–"></a>å¦‚ä½•å®ç°æ¨¡å—åŒ–</h2><h3 id="åŸå§‹å†™æ³•"><a href="#åŸå§‹å†™æ³•" class="headerlink" title="åŸå§‹å†™æ³•"></a>åŸå§‹å†™æ³•</h3><p>æ¨¡å—å°±æ˜¯å®ç°æŸä¸€åŠŸèƒ½çš„ä¸€ä¸ªç¨‹åºå—ã€‚æ¯”å¦‚ä¸‹é¢è¿™æ®µä»£ç å°±ç»„æˆäº†ä¸€ä¸ªæ¨¡å—</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//dosomething</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//dosomething</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ç¨‹åºå—ä¸­çš„å‡½æ•° a() å’Œ b()ï¼Œç»„æˆäº†ä¸€ä¸ªæ¨¡å—ã€‚ä½†æ˜¯è¿™ç§åšæ³•æš´æ¼å‡ºäº†ä¸€ä¸ªæ˜æ˜¾çš„ç¼ºç‚¹ï¼Œâ€œæ±¡æŸ“â€äº†å…¨å±€å˜é‡ï¼Œåœ¨å¤šäººå¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ— æ³•ä¿è¯å…¶ä»–äººä¸ä½ å®šä¹‰çš„å˜é‡åä¸ä¼šå‘ç”Ÿå†²çªï¼Œè€Œä¸”æ¨¡å—æˆå‘˜ä¹‹é—´çœ‹ä¸å‡ºç›´æ¥å…³ç³»ã€‚</p>
<h3 id="å¯¹è±¡å†™æ³•"><a href="#å¯¹è±¡å†™æ³•" class="headerlink" title="å¯¹è±¡å†™æ³•"></a>å¯¹è±¡å†™æ³•</h3><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠæ¨¡å—å†™æˆå¯¹è±¡çš„å½¢å¼ï¼Œæ¨¡å—æˆå‘˜ä½œä¸ºå¯¹è±¡çš„å±æ€§å­˜åœ¨ã€‚ä¾‹å¦‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> m1 = &#123;</span><br><span class="line">  _count: <span class="number">0</span>,</span><br><span class="line">  a: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//dosomething</span></span><br><span class="line">  &#125;,</span><br><span class="line">  b: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//dosomething</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>è¿™ç§å†™æ³•åˆå­˜åœ¨ä¸€ç§é—®é¢˜å°±æ˜¯ï¼Œæ¨¡å—çš„æˆå‘˜è¢«â€œæš´éœ²â€åœ¨å¤–éƒ¨å¯ä»¥è¢«ç›´æ¥ä¿®æ”¹ï¼Œä¸èƒ½ä»¥â€œç§æœ‰å˜é‡â€çš„å½¢å¼å­˜åœ¨ã€‚</p>
<h3 id="ç«‹å³è°ƒç”¨å‡½æ•°"><a href="#ç«‹å³è°ƒç”¨å‡½æ•°" class="headerlink" title="ç«‹å³è°ƒç”¨å‡½æ•°"></a>ç«‹å³è°ƒç”¨å‡½æ•°</h3><p>ä¸¥æ ¼æ¥è®²ï¼ŒJavascript ä¸­æ²¡æœ‰ç§æœ‰å˜é‡çš„æ¦‚å¿µï¼Œæ‰€æœ‰çš„å¯¹è±¡å±æ€§éƒ½æ˜¯å…¬å¼€çš„ã€‚ä¸è¿‡ï¼Œä»»ä½•åœ¨å‡½æ•°ä¸­å®šä¹‰çš„å˜é‡ï¼Œéƒ½å¯ä»¥è®¤ä¸ºæ˜¯ç§æœ‰å˜é‡ï¼Œå› ä¸ºä½ ä¸èƒ½åœ¨å‡½æ•°çš„å¤–éƒ¨è®¿é—®å®ƒä»¬ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> m1 = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _count = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//dosomething</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">var</span> b = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//dosomething</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    a: a,</span><br><span class="line">    b: b</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä¹¦å†™ä¹‹åï¼Œä»£ç å¤–éƒ¨æ— æ³•è¯»å–å†…éƒ¨çš„_count å˜é‡ï¼Œåªèƒ½ä½¿ç”¨æ¨¡å—æä¾›çš„ a å’Œ b ç‰¹æƒå‡½æ•°ã€‚è¿™å°±æ˜¯ Javascript æ¨¡å—çš„åŸºæœ¬å†™æ³•ã€‚</p>
<h3 id="æ”¾å¤§æ¨¡å¼"><a href="#æ”¾å¤§æ¨¡å¼" class="headerlink" title="æ”¾å¤§æ¨¡å¼"></a>æ”¾å¤§æ¨¡å¼</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> m1 = (<span class="function"><span class="keyword">function</span>(<span class="params">mod</span>) </span>&#123;</span><br><span class="line">  mod.c = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//dosomething</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)(m1);</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç ä¸º m1 æ¨¡å—æ·»åŠ äº†ä¸€ä¸ªæ–°æ–¹æ³• c()ï¼Œç„¶åè¿”å›æ–°çš„ m1 æ¨¡å—ã€‚</p>
<h3 id="å®½æ”¾å¤§æ¨¡å¼"><a href="#å®½æ”¾å¤§æ¨¡å¼" class="headerlink" title="å®½æ”¾å¤§æ¨¡å¼"></a>å®½æ”¾å¤§æ¨¡å¼</h3><p>æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œæ¨¡å—çš„æ¯ä¸ªéƒ¨åˆ†å¯èƒ½æ˜¯ä»ç½‘ä¸Šè·å–çš„ï¼Œæœ‰æ—¶æ— æ³•çŸ¥é“å“ªä¸ªéƒ¨åˆ†å…ˆåŠ è½½ã€‚å¦‚æœé‡‡ç”¨ä¸Šä¸€èŠ‚çš„å†™æ³•ï¼Œç¬¬ä¸€ä¸ªæ‰§è¡Œçš„éƒ¨åˆ†æœ‰å¯èƒ½åŠ è½½ä¸€ä¸ªä¸å­˜åœ¨çš„ç©ºå¯¹è±¡ï¼Œè¿™æ—¶å°±è¦é‡‡ç”¨â€œå®½æ”¾å¤§æ¨¡å¼â€ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> m1 = (<span class="function"><span class="keyword">function</span>(<span class="params">mod</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//dosomething</span></span><br><span class="line">  <span class="keyword">return</span> mod;</span><br><span class="line">&#125;)(<span class="built_in">window</span>.m1 || &#123;&#125;);</span><br></pre></td></tr></table></figure>
<p>å®½æ”¾å¤§æ¨¡å¼å°±æ˜¯å…è®¸ç«‹å³è°ƒç”¨å‡½æ•°å¯ä»¥æ˜¯ç©ºå¯¹è±¡ã€‚</p>
<h3 id="å…¨å±€å˜é‡æ³¨å…¥"><a href="#å…¨å±€å˜é‡æ³¨å…¥" class="headerlink" title="å…¨å±€å˜é‡æ³¨å…¥"></a>å…¨å±€å˜é‡æ³¨å…¥</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> m1 = (<span class="function"><span class="keyword">function</span>(<span class="params">mod</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//dosomething</span></span><br><span class="line">&#125;)(<span class="built_in">window</span>.model);</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ—¶å€™çš„ mod å…¶å®å°±æ˜¯å…¨å±€çš„ model</p>
<h2 id="æ¨¡å—åŒ–è§„èŒƒ"><a href="#æ¨¡å—åŒ–è§„èŒƒ" class="headerlink" title="æ¨¡å—åŒ–è§„èŒƒ"></a>æ¨¡å—åŒ–è§„èŒƒ</h2><h3 id="CommonJs"><a href="#CommonJs" class="headerlink" title="CommonJs"></a>CommonJs</h3><p>å®˜æ–¹æ˜¯è¿™æ ·è§£é‡Š CommonJS</p>
<blockquote>
<p>The CommonJS API will fill that gap by defining APIs that handle many common application needs, ultimately providing a standard library as rich as those of Python, Ruby and Java.</p>
</blockquote>
<p>å®ƒæä¾›äº†ä¸€ä¸ªç±»ä¼¼äº Ruby å’Œ Java çš„æ ‡å‡†åº“ï¼Œæœ‰äº†è¿™ä¸ªï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ CommonJS APIs æ„å»ºèƒ½å¤Ÿè¿è¡Œåœ¨ä¸åŒçš„ä¸»æœºç¯å¢ƒä¸­çš„åº”ç”¨ç¨‹åºã€‚æ¯”å¦‚ï¼ŒNodeJS çš„æ¨¡å—ç³»ç»Ÿå°±æ˜¯å‚ç…§ CommonJS è§„èŒƒçš„å®ç°ï¼ŒWebpack ä¹Ÿæ˜¯ä»¥ CommonJS æ–°å¼æ¥ä¹¦å†™çš„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> math = <span class="built_in">require</span>(<span class="string">'math'</span>);</span><br><span class="line">math.add(<span class="number">2</span>, <span class="number">3</span>); <span class="comment">//5</span></span><br></pre></td></tr></table></figure>
<p>è¿™è¡Œä»£ç å°±æ˜¯åœ¨ç¨‹åºä¸­å¼•å…¥äº†ä¸€ä¸ªæ•°å­¦æ¨¡å—</p>
<h3 id="AMD"><a href="#AMD" class="headerlink" title="AMD"></a>AMD</h3><p>åœ¨ CommonJS å‡ºç°ä»¥åï¼ŒæœåŠ¡ç«¯çš„æ¨¡å—æ¦‚å¿µå·²ç»å½¢æˆï¼Œè‡ªç„¶è€Œç„¶å®¢æˆ·ç«¯ä¹Ÿéœ€è¦æ¨¡å—åŒ–ã€‚å¦‚æœä¸¤è€…èƒ½å¤Ÿå…¼å®¹ï¼Œä¸€ä¸ªæ¨¡å—èƒ½å¤ŸåŒæ—¶åœ¨æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯è¿è¡Œã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> math = <span class="built_in">require</span>(<span class="string">'math'</span>);</span><br><span class="line">math.add(<span class="number">2</span>, <span class="number">3</span>); <span class="comment">//5</span></span><br></pre></td></tr></table></figure>
<p>è¿˜æ˜¯è¿™è¡Œä»£ç ï¼Œå¦‚æœåœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œå®ƒä¼šå‡ºç°ä¸€ä¸ªåŠå…¶ä¸¥é‡çš„é—®é¢˜ï¼Œå°±æ˜¯ math.add(2, 3) è¿™è¡Œä»£ç å¿…é¡»ç­‰å¾… math æ¨¡å—åŠ è½½ç»“æŸä¹‹åæ‰èƒ½è¿è¡Œã€‚å¦‚æœåŠ è½½æ—¶é—´è¿‡é•¿ï¼Œåº”ç”¨å°±ä¼šå‡ºç°æ˜æ˜¾çš„å¡é¡¿ã€‚<br><br>å› æ­¤æµè§ˆå™¨ç«¯çš„æ¨¡å—åŠ è½½å°±åº”è¯¥é‡‡ç”¨å¼‚æ­¥(Async)çš„å½¢å¼ï¼Œè¿™å°±æ˜¯ AMD è§„èŒƒè¯ç”Ÿçš„åŸå› ã€‚require.js åº“å®ç°äº† AMD è§„èŒƒã€‚ä¹‹åä¼šè¿›ä¸€æ­¥ç ”ç©¶è¿™ä¸ªè§„èŒƒã€‚</p>
<h3 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a>CMD</h3><p>ç‰ä¼¯å†™çš„ sea.js å°±æ˜¯éµå¾ªä»–æå‡ºçš„ CMD è§„èŒƒï¼Œä¸ AMD ç±»ä¼¼ã€‚</p>
<blockquote>
<p>Reference: <a href="http://www.ruanyifeng.com/blog/2012/10/javascript_module.html" target="_blank">Ruanyf</a></p>
</blockquote>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>å‰ç«¯</tag>
        <tag>æ¨¡å—åŒ–</tag>
      </tags>
  </entry>
</search>
